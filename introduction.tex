\documentclass[a4paper]{ctexart}

\usepackage[left=2.5cm, right=2.5cm, top=2.5cm, bottom=2.5cm]{geometry}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{booktabs} % For professional looking tables
\usepackage{listings} % For code snippets
\usepackage{xcolor}   % For code snippet styling
\usepackage{hyperref} % For hyperlinks in the document
\usepackage{comment}
% --- Configure Listings for Code Snippets ---
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.95}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{green!50!black},
    keywordstyle=\color{blue},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2,
    language=Java
}
\lstset{style=mystyle}

% --- Title Information ---
\title{\bfseries 虚拟校园系统软件设计说明书}
\author{撰稿人：沈傲东}
\date{
    版本号：V1.0 \\
    \vspace{0.5em}
    日\quad 期：2023-8-18
}

% --- Document Start ---
\begin{document}

\maketitle
\begin{center}
    \vspace{1.5cm}
    \Large \bfseries 东南大学计算机科学与工程学院
    \vspace{2cm}
\end{center}

\begin{abstract}
    \noindent 本文档为虚拟校园系统的软件设计说明书，旨在详细阐述系统的整体架构、模块划分、接口设计以及关键技术实现，为后续的编码、测试和维护工作提供清晰的指导。
\end{abstract}

\newpage

% --- Modification History ---
\section*{修订历史}
\begin{tabular}{p{0.2\textwidth} p{0.2\textwidth} p{0.2\textwidth} p{0.3\textwidth}}
    \toprule
    \textbf{修改日期} & \textbf{版本号} & \textbf{修改人} & \textbf{修改描述} \\
    \midrule
                  &              &              &               \\
                  &              &              &               \\
                  &              &              &               \\
    \bottomrule
\end{tabular}

\newpage

% --- Table of Contents ---
\tableofcontents
\newpage

% --- Main Content ---

\section{引言}

\subsection{编写目的}
本文档旨在详细阐述“虚拟校园 (VCampus)”项目的整体设计方案，明确其系统架构、模块划分与核心技术细节。

该系统旨在构建一个多功能的虚拟校园平台，核心功能模块包括：用户管理（含注册、登录与授权）、学生学籍管理、在线选课系统、数字图书馆、校园商店、线上银行以及一个集成的LLM智能聊天界面。

为确保系统的高效、稳定与可扩展性，本次设计遵循了一系列现代软件工程原则。系统整体采用客户端/服务器（C/S）架构，并通过Socket通信实现数据交互 。在业务实现上，我们遵循严格的分层设计（Layered Architecture）与模型-视图-控制器（MVC）模式 ，以实现业务逻辑与用户界面的有效分离。此外，项目还将采用分布式开发思想，通过多线程处理并发用户请求 ，为项目构建一个结构清晰、易于协作和维护的开发基础。

本文档是指导项目开发全过程的文件。开发团队严格遵循本文档所定义的架构、接口与规范进行编码、测试与集成工作，以确保精确实现上述各模块功能的过程中高效协作。并且本文档为学生、老师、管理员等用户提供针对该项目详实的使用说明。

\subsection{背景}
软件系统名称: 虚拟校园 (VCampus) 系统 。
项目任务来源: 本项目是“暑期学校专业技能实训课程”设定的课程设计任务 ，旨在通过构建一个功能完善的软件系统，锻炼和检验开发团队在需求分析、架构设计、团队协作及项目管理方面的综合能力。
开发者: 姓名
目标用户: 本系统的主要用户群体为虚拟校园环境中的在校学生、教职员工以及负责后台维护的系统管理员。
运行环境: 系统基于客户端/服务器 (C/S) 架构 ，服务器端程序需部署在安装了兼容 JDK 17 版本 Java 运行环境的服务器上 ，并连接至 MySQL 数据库 。客户端程序为桌面应用程序，可在主流个人计算机操作系统（如 Windows, macOS, Linux）上跨平台运行。

\subsection{定义}
\begin{itemize}
    \item \textbf{系统}: 指本文档所描述的虚拟校园系统软件。
    \item \textbf{用户}: 包括学生、教师和系统管理员。
\end{itemize}

\subsection{参考资料}
\subsubsection{项目内部文件}

《暑期学校专业技能实训课程安排》：本文档是项目的任务来源规定了项目的总体要求、功能模块、技术栈约束及考核标准。

《软件设计说明书DEMO》：为本次设计说明书的编写提供了内容结构和格式参考。

\subsubsection{国家及行业标准}

GB/T 8567-2006 计算机软件文档编制规范：本设计说明书的结构和内容参考了该国家标准，以确保文档的规范性。

Google Java Style Guide: 作为项目编码规范的主要参考，用于统一团队的代码风格、命名约定和格式化标准，以提升代码的可读性和可维护性。

Oracle Code Conventions for the Java(TM) Programming Language: 官方Java编程语言代码约定，作为编码规范的补充参考。

\subsubsection{技术与架构设计文献}

《Effective Java》 (3rd Edition) by Joshua Bloch: Java 语言的权威实践指南，为编写出更清晰、健壮、可复用的高质量Java代码提供了宝贵的建议。

《设计模式：可复用面向对象软件的基础》 (Design Patterns: Elements of Reusable Object-Oriented Software): 经典的 GoF 设计模式参考手册，为项目中如 MVC、单例等模式的应用提供了理论指导。

《代码整洁之道》 (Clean Code: A Handbook of Agile Software Craftsmanship): 软件工程领域的经典著作，指导开发者编写易于理解、易于维护的代码，其思想贯穿于本项目的编码实践中。

《架构整洁之道》 (Clean Architecture: A Craftsman's Guide to Software Structure and Design): 深入阐述了软件架构设计的核心原则，如组件、层次、边界和依赖关系等，是本项目进行分层设计和模块解耦的重要理论指导。

\section{程序系统的分析}

\subsection{可行性分析}

本节旨在对“虚拟校园 (VCampus)”项目的可行性进行综合评估，从技术实现、经济效益和实际操作三个维度，判断项目是否具备开发条件。

从技术可行性角度看，本项目是完全可实现的。项目要求采用客户端/服务器（C/S）架构，并通过Java Socket及多线程技术进行开发，这些都是成熟且拥有丰富文档支持的主流技术 。开发环境（Eclipse、兼容JDK 1.7的Java版本）和数据库（Access/MySQL）均为标准、易于获取的工具，不存在技术壁垒 。虽然团队成员主要以C++为开发语言，但具备扎实的计算机科学基础，将现有编程知识迁移至Java语言，并掌握Swing、Socket等API不存在根本性困难。因此，在技术层面，本项目风险可控。

在经济可行性方面，我们需将常规的“投资回报率”调整为“投入产出比”来评估。本项目的主要“投入”是开发团队在课程期间投入的时间和精力，而非大量的资金。所需的开发软件均为开源或免费版本，硬件则基于团队成员的个人计算机，几乎无直接的财务成本。而项目的“产出”则具有极高的价值：它不仅是完成“暑期学校专业技能实训课程”的必要条件 ，更是一次宝贵的、完整的软件工程实践。通过本项目，团队成员将获得在分层架构设计、网络通信、数据库交互以及团队协作方面的综合实战经验 ，这对未来的职业发展是重要的无形资产。因此，本项目具备显著的经济可行性。

最后，就操作可行性而言，VCampus系统旨在将校园中分散的线下业务（如学籍管理、选课、图书馆借阅等）整合到统一的线上平台，这符合教育信息化的大趋势 。对于目标用户（学生、教师、管理员），该系统能显著简化办事流程，提高信息获取效率 。系统所模拟的业务流程均源于真实的校园场景，易于用户理解和接受 。只要用户界面设计得足够直观易用，系统在理论上的校园环境中推广和使用，不存在明显的操作障碍。

综上所述，VCampus项目在技术、经济和操作层面均被证明是可行的。项目团队具备完成开发所需的技术学习和实践能力，项目成果能带来远超投入的知识回报，且其产品定位符合实际应用场景的需求。因此，项目具有可行性。

\subsection{需求分析}

本章节将详细定义VCampus系统的功能性需求与非功能性需求，作为后续系统设计、开发、测试及验收的基准。

\subsubsection{功能需求}

功能需求详细描述了系统应为用户提供的各项服务和功能。

1.用户管理模块（此模块是系统的基础，为所有用户提供身份认证与管理服务）
注册: 新用户（学生或管理员）能够通过界面输入必要信息（如用户名、密码、角色）创建新账户 。
登录/登出: 已注册用户可以通过唯一的用户名和密码登录系统，访问其权限对应的功能 。用户也可以随时安全退出登录状态 。
授权: 系统需根据用户角色（学生、管理员）区分权限，确保不同角色只能访问其被授权的功能模块 。
2. 学生学籍管理模块（该模块主要面向管理员，用于管理学生的基本信息）
信息录入与修改: 管理员可以添加、删除和修改学生的学籍信息。
信息查询: 支持通过学号、姓名等关键信息快速查询学生资料。
列表视图：通过列表查看所有学生的信息。
3. 选课系统模块（此模块为学生提供在线选课服务，是系统的核心业务功能之一）
课程信息浏览: 学生可以查看当前学期所有可选课程的列表，包括课程名称、授课教师、学分、学时等信息。
在线选课/退课: 在规定时间内，学生可以根据个人培养计划选择或退选课程。
个人课表查询: 学生可以查看自己已选课程的时间和地点安排。
4. 图书馆模块（模拟校园图书馆的核心功能）
图书查询: 用户可以根据书名、作者等信息检索馆藏图书。
借阅/归还: 模拟图书的借阅和归还流程。
图书信息浏览：可以通过列表视图浏览图书信息。
5. 校园商店与银行模块（提供虚拟的校园生活服务）
商店: 用户可以浏览商品并使用虚拟货币进行购买。
银行: 提供虚拟货币的存取款、转账等基本银行服务。
6. LLM聊天界面模块（集成一个基于大语言模型的智能问答界面，为用户提供校园信息咨询等服务）

\subsubsection{非功能需求}

非功能需求定义了系统的质量属性和在运行环境中必须遵守的约束。

性能需求: 系统应具备良好的响应能力。在高并发场景下（例如选课高峰期），服务器端需能通过多线程机制有效处理多个客户端的同时请求，确保系统不出现严重延迟或无响应。

兼容性需求: 系统开发必须严格遵守技术栈约束。后端逻辑需使用Java语言编写，JDK版本必须兼容1.7 。数据库可选用Access或MySQL，但需保证SQL语句的通用性 。

可靠性与健壮性: 客户端与服务器端的Socket通信必须建立完善的异常处理机制，能够处理网络中断、超时等常见问题，避免程序因网络波动而崩溃 。

安全性需求: 用户密码等敏感信息在数据库中存储时不应为明文。客户端与服务器之间传输的所有对象都必须实现可序列化接口，并保持版本一致性，以防止数据传输错误 。

代码规范与可维护性: 项目代码必须遵循统一的编码规范（如Google Java Style Guide），并为主要的类和方法提供标准的JavaDoc注释 。系统的设计应严格遵循分层原则，确保各层之间职责清晰、耦合度低，便于后续的功能扩展与维护 。

\subsection{开发设计环境}

\subsubsection{IntelliJ IDEA}

本项目计划采用IntelliJ IDEA作为核心集成开发环境（IDE）。该工具由JetBrains开发，广泛应用于Java项目，其突出优势体现在智能代码补全、动态错误检测、强大的重构功能以及内建的版本控制系统集成，在java编程方面具有较大的优势。尽管实训课程安排中提及了Eclipse ，但经过团队的权衡与考量，IntelliJ IDEA被认为是更优的选择。虽然Eclipse在处理多项目工作区和增量编译方面具有一定优势，但其插件生态相对不活跃，且在Java代码的实际编辑体验、重构辅助和智能代码生成方面，Intelli-J IDEA具有明显领先优势 。对于一个时间有限的暑期实训项目，快速、高效地编写业务逻辑代码至关重要。IntelliJ IDEA所提供的卓越编辑辅助功能能够显著加速开发流程，其与Maven的深度集成也确保了项目构建过程的稳定性和可重复性。

IntelliJ IDEA在此项目之中所体现的核心优势体现在以下几个方面：

1.智能编码辅助与动态分析： IntelliJ IDEA提供强大的智能代码补全、动态错误检测和即时代码质量分析功能。这些功能能够实时识别潜在的代码缺陷和不规范之处，并提供优化建议。这不仅加快了编码速度，也从源头保障了代码的健壮性和可维护性 。
2.强大的重构功能： 对于多人协作的“V-campus”项目而言，代码结构会随着开发进程不断演进。IntelliJ IDEA提供的强大、安全的自动化重构功能（如类更名、方法提取等），能够确保在修改项目结构时，关联引用能够被正确更新，从而有效维护了代码库的完整性 。
3.深度集成版本控制系统： 该IDE内置了对Git、Subversion等主流版本控制系统的深度支持。开发人员无需离开IDE环境即可完成代码提交、分支管理、冲突解决等版本控制操作，极大地简化了团队协作流程 。

此外，IntelliJ IDEA也对Maven和Gradle等构建工具提供了深度支持，能够有效管理项目依赖与构建流程，显著提升开发效率与代码可维护性。

\subsubsection{JDK 17}

本项目的核心开发语言环境选用Java Development Kit (JDK) 17。该版本由Oracle指定为长期支持（LTS）版本，这代表着它将获得长达数年的稳定安全、性能和错误修复更新。JDK 17在语言特性、运行性能及安全性方面具备多项改进，如引入了Sealed Classes、Pattern Matching for Switch等新语法特性，增强了类型系统的表达力与代码的简洁性。其优化的垃圾回收机制和提升的编译效率也为系统的高并发处理与稳定运行提供了坚实基础。同时该版本兼容性较强，也更加稳定。

选择LTS版本有助于为“虚拟校园”系统的长期稳定运行提供坚实保障，避免了因使用非LTS版本而可能面临的频繁版本升级和兼容性风险。 JDK 17在语言特性和平台性能方面也进行了多项重要改进。其中，对于本项目开发尤为有价值的特性包括：

1.密封类（Sealed Classes）： 该特性允许开发者明确地声明一个类或接口可以被哪些特定的子类继承或实现。这增强了类型系统的表达能力，为系统中的实体类（如User及其子类Student、Teacher、Admin）提供了更严谨的设计约束，从而提升了代码的安全性和可维护性 。
2.switch表达式的模式匹配（Pattern Matching for switch）： 这一预览特性简化了处理不同数据类型或状态的逻辑分支。通过将instanceof表达式和switch语句相结合，它能够显著减少代码冗余，提高代码的可读性与简洁性 。在处理“虚拟校园”系统中不同类型的消息（Message）或用户请求时，这一特性可以极大地简化业务逻辑层的开发 。

\subsubsection{MySQL 8.4.6 LTS}

数据库管理系统方面本软件设计采用MySQL 8.4.6 LTS版本。该版本不仅完全支持ACID事务，还提供诸如窗口函数、通用表表达式（CTE）和JSON字段增强功能等高级特性，极大丰富了数据操作与查询的能力。

此外，MySQL 8.4.6在身份验证、数据加密与权限管理等方面引入多项安全机制，保障了数据的机密性与完整性，非常适用于对数据一致性要求较高的校园管理系统。此版本不仅完全支持ACID事务，确保了在处理选课、学生学籍变更等核心业务中数据的一致性与完整性，还提供了注入公共表达式以及窗口函数等高级特性，极大丰富了数据操作能力。

\subsubsection{Java FX}

图形用户界面（GUI）部分基于Java FX框架实现。作为一个现代、跨平台的UI框架，Java FX提供了丰富的可视化组件、灵活的布局控制（FXML）以及CSS样式定制能力，能够构建响应迅速、视觉效果良好的桌面应用程序。其与JDK的紧密集成简化了部署过程，同时具备与底层图形硬件的良好协同，显著提升了客户端的用户体验。
其核心优势首先体现在现代化与跨平台，这代表了JavaFX提供了丰富的可视化组件和灵活的布局控制，能够构建响应迅速、视觉效果良好的桌面应用程序 。其跨平台特性确保了客户端系统在不同操作系统上（如Windows, macOS, Linux）表现出一致的用户体验。

其次体现在了设计与逻辑分离，JavaFX支持使用FXML（一种基于XML的声明式UI语言）来定义界面布局，并使用CSS样式表来定制界面风格 。这种模式将界面设计与后端业务逻辑进行了清晰的分离，完全契合了项目中强调的“分层设计”原则（MVC） 。它允许团队中的UI设计师与后端开发人员独立工作，从而显著提升开发效率。

\subsubsection{Maven}

本项目还计划采用Apache Maven作为项目构建与依赖管理工具。Maven是一款基于项目对象模型（POM）的软件项目管理工具，可自动化完成项目的编译、测试、打包及部署等生命周期管理任务。通过规范的目录结构和统一的依赖管理机制，Maven显著提升了项目的可维护性与团队协作效率。

其强大的插件生态系统和与主流IDE（如IntelliJ IDEA）的无缝集成，进一步确保了构建过程的可重复性和环境一致性，为大型多模块项目的依赖控制与构建流程提供了稳定基础。

\section{程序系统的结构}
本系统采用经典的三层架构（C/S 架构的变体），即表示层、业务逻辑层和数据访问层。
\begin{itemize}
    \item \textbf{表示层 (UI)}: 负责用户界面的展示和交互，采用Java Swing构建。
    \item \textbf{业务逻辑层 (BLL)}: 处理系统的核心业务逻辑，如用户认证、消息转发等。
    \item \textbf{数据访问层 (DAL)}: 负责与数据库进行交互，实现数据的持久化存储（CRUD操作）。
\end{itemize}

\section{用户管理模块设计说明}
\subsection{模块背景}
用户管理是系统的基础模块，负责用户的注册、登录、信息管理等功能，是保障系统安全和正常运行的前提。

\subsection{需求分析}
\begin{itemize}
    \item 用户能够注册新账号。
    \item 用户能够使用账号密码登录系统。
    \item 用户能够查看和修改个人信息。
    \item 管理员能够管理所有用户信息。
\end{itemize}

\subsection{系统设计}
\subsubsection{界面设计}
设计简洁明了的登录、注册和用户信息界面。
\subsubsection{模块流程图}
(此处原文档为图像，暂不包含)
\subsubsection{类分析}
\begin{itemize}
    \item \textbf{User}: 用户实体类，封装用户属性。
    \item \textbf{UserDao}: 数据访问对象，负责User类的数据库操作。
    \item \textbf{UserService}: 业务逻辑类，处理用户管理的业务逻辑。
    \item \textbf{LoginFrame}, \textbf{RegisterFrame}: Swing界面类。
\end{itemize}

\section{Xxx模块设计说明}
 (内容略)

\section{公共模块设计说明}
\subsection{模块概述}
公共模块（Common Module），作为“V-Campus”系统整体架构的基石，其战略定位在于承载客户端与服务器端之间所有共享的核心组件、数据模型、抽象接口和工具类。在项目所遵循的经典分层架构（view、biz/srv、vo、dao）中，此模块主要扮演了vo（值对象）层的角色，并集成了跨层、跨应用的通用服务与辅助功能。其核心价值在于通过单一代码源实现模型与接口的同步，从而规避了分布式开发中常见的类定义不一致问题，确保了数据模型在网络传输中的完整性与互操作性。这种中心化的设计不仅极大地提升了代码复用率，也为后续的团队协作、功能扩展和系统维护奠定了坚实的基础，体现了项目团队在架构设计层面的深思熟虑 。
\subsection{Message}
消息类，用于在客户端和服务器之间传递信息。它封装了消息类型、发送者、接收者、内容等核心数据。

\subsection{User}
用户实体类，包含用户的ID、用户名、密码、昵称等属性。

\subsection{数据库工具类DbHelper}
封装数据库连接的获取与释放，提供统一的数据库操作接口，简化数据访问层的代码。

\subsection{数据存取类DAO}
数据访问对象 (Data Access Object) 模式的实现，为每个实体类提供一个DAO接口及其实现，如 `UserDao`、`MessageDao` 等，将业务逻辑与数据持久化分离。

\subsection{工具类}
提供一些静态方法，用于处理如日期格式化、字符串校验等通用功能。

\subsection{其他类…}
(内容略)

\section{网络模块设计说明}
网络模块采用Socket编程实现客户端与服务器之间的TCP长连接通信。

\subsection{客户端 IMessageClientSrv 接口}
\begin{tabular}{llll}
    \toprule
    \textbf{序号} & \textbf{名称} & \textbf{方法}               & \textbf{备注} \\
    \midrule
    1           & 发送          & Boolean send(Message)     & 发送消息对象到服务器  \\
    2           & 接收          & Boolean receive(Message)  & 从服务器接收消息    \\
    3           & 校验          & Boolean validate(Message) & 校验消息的合法性    \\
    4           & …           & …                         & …           \\
    \bottomrule
\end{tabular}

\subsection{服务器端 IMessageServerSrv 接口}
\begin{tabular}{llll}
    \toprule
    \textbf{序号} & \textbf{名称} & \textbf{方法}               & \textbf{备注} \\
    \midrule
    1           & 发送          & Boolean send(Message)     & 发送消息到指定客户端  \\
    2           & 接收          & Boolean receive(Message)  & 从客户端接收消息    \\
    3           & 校验          & Boolean validate(Message) & 校验消息的合法性    \\
    4           & …           & …                         & …           \\
    \bottomrule
\end{tabular}

\subsection{Socket}
\subsubsection{客户端}
连接服务器Socket的代码片段：
\begin{comment}
\begin{lstlisting}
// 连接服务器Socket
clientSocket = new Socket(SERVER_ADDRESS, SERVER_PORT);
\end{lstlisting}
\end{comment}
\subsubsection{服务器端 IServer 接口}
\begin{tabular}{llll}
    \toprule
    \textbf{序号} & \textbf{名称} & \textbf{说明} & \textbf{备注}  \\
    \midrule
    1           & IServer     & 服务器管理接口     & 提供启动、关闭和重启服务 \\
    2           & start()     & 启动服务        &              \\
    3           & stop()      & 关闭服务        &              \\
    4           & restart()   & 重启服务        &              \\
    5           & isClosed()  & 检查服务是否关闭    &              \\
    6           & …           & …           & …            \\
    \bottomrule
\end{tabular}
\vspace{1em}
创建服务器Socket的代码片段：
\begin{comment}
\begin{lstlisting}
// 创建服务器Socket
serverSocket = new ServerSocket(IConstant.SERVER_PORT);
\end{lstlisting}
\end{comment}
\subsection{输入输出流}
使用 `ObjectInputStream` 和 `ObjectOutputStream` 来序列化和反序列化 `Message` 对象，从而在网络中传输。

\subsubsection{读取输入}
\begin{lstlisting}
ObjectInputStream ois = new ObjectInputStream(cts.getInputStream());
Message msg = (Message) ois.readObject();
\end{lstlisting}

\subsubsection{发送输出}
\begin{lstlisting}
ObjectOutputStream oos = new ObjectOutputStream(cts.getOutputStream());
oos.writeObject(msg); // Note: Original document has a typo here
oos.flush();
\end{lstlisting}

\section{多线程模块设计说明}
\subsection{客户端}
客户端UI操作在事件分发线程（EDT）中执行，避免界面卡顿。网络通信等耗时操作则在单独的工作线程中进行。
\begin{lstlisting}
public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            new MainFrame("title").setVisible(true);
        }
    });
}
\end{lstlisting}

\subsection{服务器端}
服务器采用“请求-响应”模型，主线程负责监听客户端连接请求。一旦有新连接建立，就会创建一个独立的 `ClientThread` 线程来处理该客户端的所有后续请求，从而实现并发处理。

\begin{tabular}{llll}
    \toprule
    \textbf{序号} & \textbf{名称}  & \textbf{说明} & \textbf{备注}     \\
    \midrule
    1           & ClientThread & 客户端线程管理     & 为请求的每个客户端建立一个线程 \\
    \bottomrule
\end{tabular}

\end{document}
